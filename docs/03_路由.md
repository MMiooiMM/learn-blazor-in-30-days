路由

### 路由範本

元件能夠攔截瀏覽器導覽，並轉譯符合所要求位址的頁面

透過 `Router` 元件來綁定有指定路由的元件，專案初始化時就會在 `App.razor` 產生以下內容。

```csharp
<Router AppAssembly="@typeof(Program).Assembly">
    <Found Context="routeData">
        <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
    </Found>
    <NotFound>
        <LayoutView Layout="@typeof(MainLayout)">
            <p>Sorry, there's nothing at this address.</p>
        </LayoutView>
    </NotFound>
</Router>
```

這邊簡單的介紹一下 `Router` 元件如何使用。

- `AppAssembly` 用於設定或取得組件，該組件下的元件能被路由尋訪。

- `AdditionalAssemblies` 用於設定或取得額外的組件集，也就是當路由定義在其他類別庫時能被正確尋訪。

  ```csharp
  <Router
      AppAssembly="@typeof(Program).Assembly"
      AdditionalAssemblies="new[] { typeof(Component1).Assembly }">
      ...
  </Router>
  ```

- `Found` 用於設定或取得當路由匹配成功時所顯示的內容。

- `NotFound` 用於設定或取得當路由匹配失敗時所顯示的內容。

`RouteView` 顯示指定的頁面元件，並可設定預設的版面配置。

- `RouteData` 獲取或設置路由資料，這決定了顯示的頁面以及提供給該頁面的參數值。

- `DefaultLayout` 設定或取得預設的版面配置，當指定的頁面元件無設定版面配置時使用，會在後面介紹**版面配置**時詳細說明。

### 元件的路由設定

透過指示詞(`@page`)來設定頁面元件的進入點，一個頁面元件可以有多個進入點。

```csharp
@page "/RouteParameter"
@page "/RouteParameter2"
@page "/RouteParameter/{text}"

<h1>Blazor is @Text!</h1>

@code {
    [Parameter]
    public string Text { get; set; }

    protected override void OnInitialized()
    {
        Text = Text ?? "fantastic";
    }
}
```

當路由為 `/RouteParameter` 或 `/RouteParameter2` 以及 `/RouteParameter/xxx` 都會進入這個元件。這邊的 `{text}` 為路由參數，路由器會使用路由參數，並以相同的名稱填入到對應的元件參數(不區分大小寫)。

**需注意：路由參數並不支援選擇性參數**

使用路由參數時也可以加上條件約束，來強制比對路由參數與元件參數類型是否一致，若不一致則視為路由匹配失敗。

```csharp
@page "/Users/{Id: int}"

<h1>The user Id is @Id!</h1>

@code {
    [Parameter]
    public int Id { get; set; }
}
```

當路由為 `/Users/1` 或 `/Users/1000` 能進入這個元件，但 `/User/text` 則無法進入。

條件約束的型別有

自己作張圖!!!!
- bool
- datetime
- decimal
- double
- float
- guid
- int
- long


* https://docs.microsoft.com/zh-tw/aspnet/core/blazor/fundamentals/routing?view=aspnetcore-3.1